<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamSaver Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0b0f19; color: white; font-family: sans-serif; }
        .loader { border-top-color: #ef4444; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6">

    <div class="max-w-xl w-full text-center">
        <h1 class="text-4xl font-black mb-2">STREAMSAVER <span class="text-red-600">PRO</span></h1>
        <p id="status" class="text-xs text-gray-500 mb-8 font-bold uppercase tracking-widest">Waking up server...</p>

        <div class="bg-gray-900/50 p-2 rounded-2xl flex gap-2 border border-white/10">
            <input id="url" type="text" placeholder="Paste YouTube Link" class="bg-transparent flex-1 p-4 outline-none">
            <button onclick="analyze()" class="bg-red-600 px-8 py-4 rounded-xl font-bold">ANALYZE</button>
        </div>

        <div id="result" class="hidden mt-8 p-8 bg-gray-900 rounded-3xl border border-red-600/20">
            <p class="mb-6 font-bold text-gray-400">VIDEO IDENTIFIED</p>
            <div class="flex flex-col gap-4">
                <button onclick="dl('mp4')" class="bg-white text-black p-4 rounded-xl font-bold">DOWNLOAD MP4</button>
                <button onclick="dl('mp3')" class="border border-white/20 p-4 rounded-xl font-bold">DOWNLOAD MP3</button>
            </div>
        </div>
    </div>

    <script>
        // ⚡ Yahan apna Render ka sahi URL dalo
        const BACKEND = "https://ytdownloader-pro.onrender.com"; 
        let vid = "";

        // Server Wake-up Logic
        window.onload = () => {
            fetch(BACKEND + "/").then(() => {
                document.getElementById('status').innerText = "● Server Ready";
                document.getElementById('status').classList.add('text-green-500');
            });
        };

        function analyze() {
            const val = document.getElementById('url').value;
            const match = val.match(/(?:v=|youtu\.be\/|shorts\/)([a-zA-Z0-9_-]{11})/);
            if(match) {
                vid = match[1];
                document.getElementById('result').classList.remove('hidden');
            } else {
                alert("Invalid URL!");
            }
        }

        function dl(t) {
            window.location.href = `${BACKEND}/download?videoId=${vid}&type=${t}`;
        }
    </script>
</body>
</html>
