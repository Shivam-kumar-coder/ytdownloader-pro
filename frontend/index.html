<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YTDownloader Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white min-h-screen flex items-center justify-center">

  <div class="bg-gray-900 p-8 rounded-xl w-full max-w-xl">
    <h1 class="text-3xl font-bold text-center mb-6">
      YTDownloader <span class="text-red-500">Pro</span>
    </h1>

    <input
      id="videoUrl"
      type="text"
      placeholder="Paste YouTube URL"
      class="w-full p-3 rounded bg-gray-800 border border-gray-700 mb-4"
    />

    <button
      onclick="analyze()"
      class="w-full bg-red-600 hover:bg-red-700 p-3 rounded font-bold"
    >
      ANALYZE
    </button>

    <div id="actions" class="hidden mt-6 space-y-3">
      <button onclick="download('mp4')" class="w-full bg-green-600 p-3 rounded">
        Download MP4
      </button>
      <button onclick="download('mp3')" class="w-full bg-blue-600 p-3 rounded">
        Download MP3
      </button>
    </div>
  </div>

<script>
const RENDER_BACKEND_URL = "https://ytdownloader-pro.onrender.com";
let videoId = "";

function analyze() {
  const url = document.getElementById("videoUrl").value.trim();
  const match = url.match(/(?:v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);

  if (!match) {
    alert("Invalid YouTube URL");
    return;
  }

  videoId = match[1];
  document.getElementById("actions").classList.remove("hidden");
}

function download(type) {
  const link = document.createElement("a");
  link.href = `${RENDER_BACKEND_URL}/download?videoId=${videoId}&type=${type}`;
  link.click();
}
</script>

</body>
</html>
